function [avg_load] = calculate_average_flow()
%UNTITLED3 Summary of this function goes here
%   Detailed explanation goes here

app_start_time = ...
   [3000    18006000    28812000    34060000    40025000    43753000;
    90000    38815000    40863000    56551000    57463000    59880000;
    7894000    10860000    12526000    14851000    14968000    15791000;
    6220000    6773000    16717000    18491000    22577000    22865000;
    33146000    36490000    36521000    37051000    39292000    42537000;
    9968000    18207000    18384000    18604000    21914000    25626000;
    21264000    23615000    25059000    41066000    45724000    52000000;
    25861000    28695000    31420000    36955000    46574000    49314000;
    42611000    44160000    46327000    51256000    53035000    54608000;
    43690000    43856000    44394000    45609000    50116000    56184000;];

app_end_time = ...
  [ 60000000    33895000    41823000    49154000    53717000    59651000;
    60000000    53281000    53262000    60000000    60000000    60000000;
    18191000    18191000    18191000    18191000    18191000    18191000;
    23258000    22372000    23258000    23258000    23258000    23258000;
    43191000    43191000    43191000    43191000    43191000    43191000;
    24172000    26283000    26283000    26283000    26283000    26283000;
    60000000    37855000    40368000    58506000    60000000    60000000;
    60000000    45187000    46570000    50320000    60000000    60000000;
    59427000    59427000    59427000    59427000    59427000    59427000;
    59651000    58496000    59493000    58237000    59651000    59651000;];

app_flow = ...
     [40 15 11 23 11 25;
     40 13 11 23 14 16;
     22 14 19 22 11 21;
     15 11 19 25 15 23;
     15 12 18 21 19 21;
     22 14 22 23 11 22;
     40 21 12 23 14 17;
     40 13 14 23 18 19;
     12 14 12 23 11 22;
     22 24 22 21 21 17;];

bits = 0;
time = 0;
T_SAMPLE = 10 * 1E-6;
for i = 1: 10
    for j = 1:6
        duration = app_end_time(i,j) - app_start_time(i,j);
        bits = bits + (duration * app_flow(i,j)*1e+6*T_SAMPLE);
        time = time + (duration)*T_SAMPLE;
    end
end

avg_load = bits/(time*1e+6);
   

end